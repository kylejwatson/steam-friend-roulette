<app-loading-overlay *ngIf="loading" (cancelEvent)="goBack()"></app-loading-overlay>

<div class="controls-container">
    <div class="buttons-container">
        <button (click)="goBack()" mat-raised-button class="back-button">Back to Steam ID entry </button>
        <mat-form-field appearance="standard" class="search-input">
            <mat-label>Search</mat-label>
            <input type="text" matInput [matAutocomplete]="auto" [(ngModel)]="searchInput" (keyup.enter)="onSearch()"
                #trigger="matAutocompleteTrigger" [formControl]="searchForm">
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn" (optionSelected)="onSearch()">
                <mat-option *ngFor="let friend of filteredFriends()" [value]="friend.personaname">
                    {{friend.personaname}}
                </mat-option>
            </mat-autocomplete>
            <mat-error>
                Cannot find any friends with that name
            </mat-error>
        </mat-form-field>
        <button (click)="onSearch()" mat-raised-button class="search-button">Search</button>

        <button (click)="refresh()" mat-button class="back-button" color="accent">
            <mat-icon class="refresh-icon">refresh</mat-icon> Refresh friends list
        </button>
    </div>
</div>
<div class="friend-selection">
    <div class="friend-list">
        <app-friend-list [friends]="steamService.selectedFriends()"
            (selectedFriendEvent)="steamService.toggleFriend($event)" title="Selected">
        </app-friend-list>
    </div>
    <div class="friend-list">
        <app-friend-list [friends]="steamService.onlineFriends()"
            (selectedFriendEvent)="steamService.toggleFriend($event)" title="Online">
        </app-friend-list>
        <app-friend-list [friends]="steamService.otherFriends()"
            (selectedFriendEvent)="steamService.toggleFriend($event)" title="Away/Offline">
        </app-friend-list>
    </div>
</div>
<div class="games-button-container">
    <button (click)="getGames()" mat-raised-button class="games-button"
        [disabled]="steamService.selectedFriends().length === 0" color="accent">Get shared games
        <mat-icon>sports_esports</mat-icon>
    </button>
</div>
<button mat-fab aria-label="Scroll back to the top of the list" class="scroll-button" (click)="scrollToTop()">
    <mat-icon>arrow_upward</mat-icon>
</button>